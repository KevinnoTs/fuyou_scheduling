<!DOCTYPE html>
<html lang="zh">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#ffffff">
    <title>å¦‡å¹¼å½±åƒç§‘WFM</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/base.css') }}?v=5.0">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}?v=6.0">
    {% block styles %}{% endblock %}
    <link rel="icon"
        href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ğŸ¥</text></svg>">
</head>

<body
    class="{{ current_user.theme_mode if current_user.is_authenticated and current_user.theme_mode else request.cookies.get('theme_mode', 'light') }} theme-{{ current_user.theme_color if current_user.is_authenticated and current_user.theme_color else request.cookies.get('theme_color', 'orange') }}">
    <!-- å¯¼èˆªæ  -->
    {% block navbar %}
    <nav class="navbar">
        <a href="{{ url_for('index') }}" class="navbar-brand">
            <!-- SVG Logo: White for Colored Navbar -->
            <svg width="32" height="32" viewBox="0 0 100 100" style="flex-shrink: 0; margin-right: 8px;" fill="none">
                <!-- Outer Ring/Border -->
                <path
                    d="M50 5 L50 5 Q75 5 80 25 Q95 25 95 50 Q95 75 80 75 Q75 95 50 95 Q25 95 20 75 Q5 75 5 50 Q5 25 20 25 Q25 5 50 5 Z"
                    stroke="var(--text-brand)" stroke-width="5" fill="none" opacity="0.9" />

                <!-- Inner Filled Shape (Clover) -->
                <path
                    d="M50 15 Q70 15 75 30 L75 30 Q85 30 85 50 Q85 70 75 70 L75 70 Q70 85 50 85 Q30 85 25 70 L25 70 Q15 70 15 50 Q15 30 25 30 L25 30 Q30 15 50 15 Z"
                    fill="var(--text-brand)" />

                <!-- Cross Cutout (Actually Primary Color to match BG or Semi-Transparent) -->
                <!-- Ideally this should be "cut out" but since we can't easily do composite operations inline, 
                     we will use a slightly transparent white overlay or just rely on the shape. 
                     Let's use a subtle shadow or just leave it white on white? No.
                     Let's make the Cross bars SEMI-TRANSPARENT PRIMARY COLOR to look like "glass" on the white logo. -->
                <rect x="40" y="25" width="20" height="50" rx="2" fill="var(--primary-color)" />
                <rect x="25" y="40" width="50" height="20" rx="2" fill="var(--primary-color)" />
            </svg>
            <span style="font-size: 1.25rem;">å¦‡å¹¼å½±åƒç§‘WFM</span>
        </a>

        {% if current_user.is_authenticated %}
        <button class="navbar-toggle" onclick="toggleNavbar()" style="color: var(--text-brand);">â˜°</button>
        <div class="navbar-nav" id="navbarNav">
            <a href="{{ url_for('schedule') }}" class="nav-btn">
                <span class="nav-icon">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round"
                        stroke-linejoin="round">
                        <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                        <line x1="16" y1="1" x2="16" y2="5"></line>
                        <line x1="8" y1="1" x2="8" y2="5"></line>
                        <line x1="3" y1="9" x2="21" y2="9"></line>
                    </svg>
                </span>
                <span>æ’ç­è¡¨</span>
            </a>
            {% if current_user.role in ['doctor', 'admin', 'super_admin'] %}
            <a href="{{ url_for('workload_stats') }}" class="nav-btn">
                <span class="nav-icon">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round"
                        stroke-linejoin="round">
                        <line x1="18" y1="20" x2="18" y2="10"></line>
                        <line x1="12" y1="20" x2="12" y2="4"></line>
                        <line x1="6" y1="20" x2="6" y2="14"></line>
                    </svg>
                </span>
                <span>å·¥ä½œé‡ç»Ÿè®¡</span>
            </a>
            {% endif %}
            <a href="{{ url_for('doctors_list') }}" class="nav-btn"><span class="nav-icon">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round"
                        stroke-linejoin="round">
                        <!-- Compressed to 18px height (3-21) -->
                        <path d="M16 5h2a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V7a2 2 0 0 1 2-2h2"></path>
                        <rect x="8" y="3" width="8" height="4" rx="1" ry="1"></rect>
                        <path d="M12 12h4"></path>
                        <path d="M12 16h4"></path>
                        <path d="M8 12h.01"></path>
                        <path d="M8 16h.01"></path>
                    </svg>
                </span>
                <span>åŒ»ç”Ÿåˆ—è¡¨</span></a>
            {% if current_user.role in ['admin', 'super_admin'] %}
            <a href="{{ url_for('users_list') }}" class="nav-btn">
                <span class="nav-icon">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                        <circle cx="9" cy="7" r="4"></circle>
                        <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                        <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                    </svg>
                </span>
                <span>ç”¨æˆ·åˆ—è¡¨</span>
            </a>
            <a href="{{ url_for('holidays_list') }}" class="nav-btn">
                <span class="nav-icon">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M18 9h1a4 4 0 0 1 0 8h-1"></path>
                        <path d="M2 9h16v9a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V9z"></path>
                        <line x1="6" y1="2" x2="6" y2="5"></line>
                        <line x1="10" y1="2" x2="10" y2="5"></line>
                        <line x1="14" y1="2" x2="14" y2="5"></line>
                    </svg>
                </span>
                <span>èŠ‚å‡æ—¥ç®¡ç†</span>
            </a>
            {% endif %}

            <!-- ç”¨æˆ·ä¸‹æ‹‰èœå• -->
            <div class="user-menu" id="userMenu">
                <button class="user-name" onclick="toggleUserDropdown(event)">
                    {{ current_user.real_name or current_user.username }} â–¼
                </button>
                <div class="dropdown-content" id="userDropdown">
                    <a href="#" onclick="openThemeModal(event)" style="display: flex; align-items: center;">
                        <span style="display: inline-flex; width: 20px; margin-right: 8px; justify-content: center;">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <circle cx="12" cy="12" r="10"></circle>
                                <line x1="14.31" y1="8" x2="20.05" y2="17.94"></line>
                                <line x1="9.69" y1="8" x2="21.17" y2="8"></line>
                                <line x1="7.38" y1="12" x2="13.12" y2="2.06"></line>
                                <line x1="9.69" y1="16" x2="3.95" y2="6.06"></line>
                                <line x1="14.31" y1="16" x2="2.83" y2="16"></line>
                                <line x1="16.62" y1="12" x2="10.88" y2="21.94"></line>
                            </svg>
                        </span>
                        æ˜¾ç¤ºè®¾ç½®
                    </a>
                    <a href="{{ url_for('logout') }}" style="display: flex; align-items: center;">
                        <span style="display: inline-flex; width: 20px; margin-right: 8px; justify-content: center;">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
                                <polyline points="16 17 21 12 16 7"></polyline>
                                <line x1="21" y1="12" x2="9" y2="12"></line>
                            </svg>
                        </span>
                        é€€å‡ºç™»å½•
                    </a>
                </div>
            </div>
        </div>
        {% else %}
        <!-- ç»Ÿä¸€ç™»å½•æŒ‰é’® -->
        <div class="login-wrapper">
            <button type="button" class="btn-primary login-btn" onclick="openLoginModal(event)">ç™»å½•</button>
        </div>
        {% endif %}
    </nav>
    {% endblock %}

    <!-- æ¶ˆæ¯æç¤º -->
    <div class="flash-messages" id="flashMessages">
        {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
        {% for category, message in messages %}
        <div class="toast-message {{ category }}">{{ message }}</div>
        {% endfor %}
        {% endif %}
        {% endwith %}
    </div>

    <!-- ä¸»å†…å®¹åŒº -->
    <div class="container"
        style="flex: 1; width: 100%; box-sizing: border-box; overflow: hidden; display: flex; flex-direction: column;">
        <div class="content-wrapper {% block wrapper_class %}scrollable-wrapper{% endblock %}">
            {% block content %}{% endblock %}
        </div>
    </div>

    <!-- Footer -->
    <!-- Footer -->
    {% block footer %}
    <footer class="footer" style="margin-bottom: 0.5rem;">
        <div class="container" style="text-align: center; padding: 0.5rem 0;">
            <div class="footer-content" style="letter-spacing: normal;">
                <span class="footer-item">Â© 2025 å¦‡å¹¼å½±åƒç§‘æ’ç­ç»Ÿè®¡ç³»ç»Ÿ</span>
                <span class="footer-separator">|</span>
                <span class="footer-item">Powered by KevinnoTs</span>
                <span class="footer-separator">|</span>
                <span class="footer-item">æœ¬ç«™ä½¿ç”¨ã€Œ<a href="https://github.com/lxgw/LxgwNeoXiHei-Screen" target="_blank"
                        style="color: var(--text-light); text-decoration: none;">éœé¹œæ–°æ™°é»‘</a>ã€å¼€æºå­—ä½“</span>
            </div>
        </div>
    </footer>
    {% endblock %}

    <!-- Unified Login Modal -->
    <div class="modal-overlay" id="loginModal">
        <div class="modal-content">
            <span class="modal-close" onclick="closeLoginModal()">&times;</span>
            <h3 class="modal-title">ç”¨æˆ·ç™»å½•</h3>
            <form action="{{ url_for('login') }}" method="post" id="loginFormModal" novalidate>
                <div class="form-group">
                    <label>ç”¨æˆ·å</label>
                    <input type="text" name="username" class="form-control" required>
                </div>
                <div class="form-group">
                    <label>å¯†ç </label>
                    <input type="password" name="password" class="form-control" required>
                </div>
                <button type="submit" class="btn-primary" style="width: 100%; margin-top: 1rem;">ç™»å½•</button>
            </form>
        </div>
    </div>

    <!-- Theme Settings Modal -->
    <div class="modal-overlay" id="themeModal">
        <div class="modal-content" style="max-width: 450px;">
            <span class="modal-close" onclick="closeThemeModal()">&times;</span>
            <h3 class="modal-title">æ˜¾ç¤ºè®¾ç½®</h3>

            <div class="theme-section">
                <h4 style="margin-bottom: 1rem; color: var(--text-main);">æ¨¡å¼</h4>
                <div class="theme-toggle-group" style="display: flex; gap: 1rem;">
                    <button class="theme-btn" onclick="setThemeMode('light')" id="btn-mode-light">ğŸŒ æ˜äº®</button>
                    <button class="theme-btn" onclick="setThemeMode('dark')" id="btn-mode-dark">ğŸŒ™ æ·±è‰²</button>
                </div>
            </div>

            <div class="theme-section" style="margin-top: 2rem;">
                <h4 style="margin-bottom: 1rem; color: var(--text-main);">è‰²è°ƒ</h4>
                <div class="color-options" style="display: flex; gap: 1rem;">
                    <div class="color-option theme-orange" onclick="setThemeColor('orange')" title="æš–æ©™"></div>
                    <div class="color-option theme-blue" onclick="setThemeColor('blue')" title="é™è°§è“"></div>
                    <div class="color-option theme-green" onclick="setThemeColor('green')" title="æ¸…æ–°ç»¿"></div>
                    <div class="color-option theme-purple" onclick="setThemeColor('purple')" title="ä¼˜é›…ç´«"></div>
                </div>
            </div>

            <div class="theme-actions" style="margin-top: 2.5rem; text-align: right;">
                <button class="btn-outline" onclick="closeThemeModal()" style="margin-right: 0.5rem;">å–æ¶ˆ</button>
                <button class="btn-primary" onclick="saveThemeSettings()">ä¿å­˜è®¾ç½®</button>
            </div>
        </div>
    </div>

    <!-- è„šæœ¬ -->
    <script>
        // æ˜¾ç¤ºè‡ªå®šä¹‰ Flash æ¶ˆæ¯ (Toast)
        function showToast(message, type = 'info') {
            console.log('Showing Toast:', message);
            var container = document.getElementById('flashMessages');
            if (!container) {
                console.error('Toast container not found! Creating fallback...');
                container = document.createElement('div');
                container.id = 'flashMessages';
                document.body.appendChild(container); // Append first
            }

            // Dynamic positioning based on navbar height
            var nav = document.querySelector('.navbar');
            var topPos = nav ? nav.offsetHeight : 20;

            // ALWAYS force container styles inline to guarantee visibility/positioning
            container.className = 'flash-messages';
            // Reduced gap from 10px to 6px; Top aligned using dynamic calculation; Right aligned with navbar padding (1rem=16px)
            container.style.cssText = `position: fixed; top: ${topPos}px; right: 16px; z-index: 2147483647; display: flex; flex-direction: column; gap: 6px; align-items: flex-end; pointer-events: none;`;

            var alert = document.createElement('div');
            alert.className = `toast-message ${type}`;
            alert.textContent = message;

            // Reinforced Visibility, CSS handles theme colors
            // Explicitly override margin-bottom to 0 to prevent style.css from adding 10px
            alert.style.cssText = `
                background-color: var(--white); 
                color: var(--text-main); 
                padding: 1rem 1.5rem; 
                border-radius: 12px; 
                box-shadow: var(--shadow-md); 
                font-weight: 500; 
                display: flex; 
                align-items: center; 
                pointer-events: auto; 
                opacity: 1 !important; 
                visibility: visible !important; 
                margin-bottom: 0 !important;
            `;

            container.appendChild(alert);

            // Auto-dismiss logic
            setTimeout(function () {
                // Restore "Original" Animation: Float up significantly (-20px) with smooth easing
                alert.style.transition = "opacity 0.6s ease-out, transform 0.6s ease-out";
                alert.style.opacity = "0";
                alert.style.transform = "translateY(-20px)";

                // After animation, hide but KEEP SPACE (prevent jump)
                setTimeout(() => {
                    alert.style.visibility = 'hidden';
                    alert.classList.add('dismissed');

                    // Check if we can clean up the whole stack
                    const allToasts = container.querySelectorAll('.toast-message');
                    const activeToasts = Array.from(allToasts).filter(el => !el.classList.contains('dismissed'));

                    if (activeToasts.length === 0) {
                        console.log('All toasts dismissed, resetting stack');
                        container.innerHTML = '';
                    }
                }, 600); // Match transition duration
            }, 3000);
        }

        // Generic login form handler
        function handleLoginSubmit(event) {
            event.preventDefault();
            var form = event.target;

            // Access elements directly via form.elements
            var username = form.username.value;
            var password = form.password.value;

            if (!username || !username.trim()) {
                showToast('è¯·è¾“å…¥ç”¨æˆ·å');
                if (form.username) form.username.focus();
                return;
            }
            if (!password || !password.trim()) {
                showToast('è¯·è¾“å…¥å¯†ç ');
                if (form.password) form.password.focus();
                return;
            }

            var formData = new FormData(form);
            fetch(form.action, {
                method: 'POST',
                body: formData,
                headers: {
                    'X-Requested-With': 'XMLHttpRequest'
                }
            })
                .then(response => response.json())
                .then(data => {
                    if (data.success) {
                        window.location.href = data.redirect_url;
                    } else {
                        showToast(data.message);
                        if (form.password) {
                            form.password.value = '';
                            form.password.focus();
                        }
                    }
                })
                .catch(error => {
                    console.error('Login Error:', error);
                    showToast('ç™»å½•è¯·æ±‚å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•');
                });
        }

        // ç»‘å®šç™»å½•è¡¨å•äº‹ä»¶
        document.getElementById('loginFormModal')?.addEventListener('submit', handleLoginSubmit);

        // æ‰“å¼€ç»Ÿä¸€ç™»å½•æ¨¡æ€æ¡†
        function openLoginModal(event) {
            if (event) event.stopPropagation();
            document.getElementById('loginModal').classList.add('active');
            // Auto focus
            setTimeout(() => {
                const usernameInput = document.querySelector('#loginFormModal input[name="username"]');
                usernameInput.focus();

                // Restore from localStorage
                const saved = localStorage.getItem('fuyou_username');
                if (saved && !usernameInput.value) {
                    usernameInput.value = saved;
                }

                // Save on input
                usernameInput.addEventListener('input', (e) => {
                    localStorage.setItem('fuyou_username', e.target.value);
                });
            }, 100);
        }

        // å…³é—­ç»Ÿä¸€ç™»å½•æ¨¡æ€æ¡†
        function closeLoginModal() {
            document.getElementById('loginModal').classList.remove('active');
        }

        // ç”¨æˆ·ä¸‹æ‹‰èœå•äº¤äº’
        function toggleUserDropdown(event) {
            event.stopPropagation();
            var menu = document.getElementById('userMenu');
            var dropdown = document.getElementById('userDropdown');
            menu.classList.toggle('active');
            dropdown.classList.toggle('show');
        }

        // Theme Settings Logic
        let currentMode = '{{ current_user.theme_mode if current_user.is_authenticated and current_user.theme_mode else request.cookies.get("theme_mode", "light") }}';
        let currentColor = '{{ current_user.theme_color if current_user.is_authenticated and current_user.theme_color else request.cookies.get("theme_color", "orange") }}';

        function openThemeModal(event) {
            event.preventDefault();
            event.stopPropagation();
            document.getElementById('themeModal').classList.add('active');
            updateThemeUIState();
            document.getElementById('userDropdown').classList.remove('show');
            document.getElementById('userMenu').classList.remove('active');
        }

        function closeThemeModal() {
            document.getElementById('themeModal').classList.remove('active');
        }

        function updateThemeMeta() {
            const metaThemeColor = document.querySelector("meta[name=theme-color]");
            if (metaThemeColor) {
                metaThemeColor.setAttribute("content", currentMode === 'dark' ? '#000000' : '#ffffff');
            }
        }

        function setThemeMode(mode) {
            currentMode = mode;
            document.body.classList.remove('light', 'dark');
            document.body.classList.add(mode);
            updateThemeUIState();
            updateThemeMeta();
        }

        function setThemeColor(color) {
            currentColor = color;
            document.body.classList.remove('theme-orange', 'theme-blue', 'theme-green', 'theme-purple');
            document.body.classList.add('theme-' + color);
            updateThemeUIState();
        }

        function updateThemeUIState() {
            document.querySelectorAll('.theme-btn').forEach(btn => btn.classList.remove('active'));
            document.getElementById('btn-mode-' + currentMode)?.classList.add('active');
            document.querySelectorAll('.color-option').forEach(opt => opt.classList.remove('active'));
            document.querySelector('.color-option.theme-' + currentColor)?.classList.add('active');
        }

        function saveThemeSettings() {
            fetch('/api/update_theme', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'X-Requested-With': 'XMLHttpRequest'
                },
                body: JSON.stringify({
                    mode: currentMode,
                    color: currentColor
                })
            })
                .then(response => response.json())
                .then(data => {
                    if (data.success) {
                        showToast('æ˜¾ç¤ºè®¾ç½®å·²ä¿å­˜');
                        closeThemeModal();
                    } else {
                        showToast('ä¿å­˜å¤±è´¥: ' + (data.error || 'æœªçŸ¥é”™è¯¯'));
                    }
                })
                .catch(error => {
                    console.error('Error:', error);
                    showToast('è®¾ç½®å·²åº”ç”¨');
                    closeThemeModal();
                });

            const d = new Date();
            d.setTime(d.getTime() + (30 * 24 * 60 * 60 * 1000));
            let expires = "expires=" + d.toUTCString();
            document.cookie = "theme_mode=" + currentMode + ";" + expires + ";path=/";
            document.cookie = "theme_color=" + currentColor + ";" + expires + ";path=/";
        }

        // Dropdown Alignment Logic (Pixel Perfect)
        function alignDropdown() {
            const nav = document.querySelector('.navbar');
            const menu = document.querySelector('.user-menu');
            if (nav && menu) {
                const navRect = nav.getBoundingClientRect();
                const menuRect = menu.getBoundingClientRect();
                // Calculate distance from menu bottom to navbar bottom
                const offset = navRect.bottom - menuRect.bottom;
                // Apply to CSS variable (default 18px if calculation fails)
                menu.style.setProperty('--dropdown-top-offset', (offset > 0 ? offset : 0) + 'px');
            }
        }

        // Click outside to close (Updated with alignment check)
        window.onclick = function (event) {
            var menu = document.getElementById('userMenu');
            var dropdown = document.getElementById('userDropdown');
            if (menu && dropdown) {
                if (!event.target.closest('.user-menu')) {
                    if (dropdown.classList.contains('show')) {
                        dropdown.classList.remove('show');
                        menu.classList.remove('active');
                    }
                }
            }
            var themeModal = document.getElementById('themeModal');
            if (themeModal && event.target === themeModal) {
                closeThemeModal();
            }
        }

        // Initialize Alignment
        window.addEventListener('resize', alignDropdown);
        document.addEventListener('DOMContentLoaded', alignDropdown);
        // Also recalculate when opening
        const originalToggle = toggleUserDropdown;
        toggleUserDropdown = function (event) {
            alignDropdown();
            originalToggle(event);
        }

        // Flash Message / Init Logic
        document.addEventListener('DOMContentLoaded', function () {
            // Apply "float away" animation to existing toasts from server
            var toasts = document.querySelectorAll('.toast-message');
            if (toasts.length > 0) {
                setTimeout(function () {
                    toasts.forEach(function (alert) {
                        alert.style.transition = "opacity 0.6s ease-out, transform 0.6s ease-out";
                        alert.style.opacity = "0";
                        alert.style.transform = "translateY(-20px)";
                        setTimeout(() => {
                            alert.style.visibility = 'hidden';
                        }, 600);
                    });
                }, 3000);
            }

            // Initialize UI state
            updateThemeUIState();
            updateThemeMeta();

            // Sync auth settings
            {% if current_user.is_authenticated %}
            const d = new Date();
            d.setTime(d.getTime() + (30 * 24 * 60 * 60 * 1000));
            let expires = "expires=" + d.toUTCString();
            document.cookie = "theme_mode={{ current_user.theme_mode or 'light' }};" + expires + ";path=/";
            document.cookie = "theme_color={{ current_user.theme_color or 'orange' }};" + expires + ";path=/";
            {% endif %}
        });

        function toggleNavbar() {
            const nav = document.getElementById('navbarNav');
            nav.classList.toggle('show');
        }

        document.addEventListener('click', function (event) {
            const nav = document.getElementById('navbarNav');
            const toggle = document.querySelector('.navbar-toggle');
            if (nav && nav.classList.contains('show') && !nav.contains(event.target) && !toggle.contains(event.target)) {
                nav.classList.remove('show');
            }
        });

        function toggleActions() {
            const actions = document.querySelector('.action-bar');
            if (actions) {
                actions.classList.toggle('show');
            }
        }

        document.addEventListener('click', function (event) {
            const actions = document.querySelector('.action-bar');
            const toggle = document.querySelector('.action-toggle-btn');
            if (actions && actions.classList.contains('show')) {
                if (!actions.contains(event.target) && (!toggle || !toggle.contains(event.target))) {
                    actions.classList.remove('show');
                }
            }
        });
    </script>
    {% block scripts %}{% endblock %}
</body>

</html>